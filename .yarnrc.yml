nodeLinker: node-modules

# Install both x64 (for CI/dev on macOS/Linux) and arm64 (for Lambda) native binaries.
# This ensures Sharp arm64 binaries are available when SST bundles the Lambda.
supportedArchitectures:
  os:
    - current
    - linux
  cpu:
    - current
    - arm64
  libc:
    - current
    - glibc

yarnPath: .yarn/releases/yarn-4.12.0.cjs

packageExtensions:
  "@sentry/nextjs@*":
    peerDependencies:
      "@opentelemetry/api": "*"
      "@opentelemetry/context-async-hooks": "*"
      "@opentelemetry/core": "*"
      "@opentelemetry/sdk-trace-base": "*"
      react: "*"
      # webpack is provided by Next.js internally, no need to install
      webpack: "*"
  "@types/react-datepicker@*":
    peerDependencies:
      react: "*"
      react-dom: "*"
